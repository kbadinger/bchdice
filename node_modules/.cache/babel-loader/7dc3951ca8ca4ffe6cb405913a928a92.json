{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst Explorer_1 = __importDefault(require(\"../../Actions/Explorer\"));\n\nconst ApiError_1 = __importDefault(require(\"../../Errors/ApiError\"));\n\nfunction buildDataOptions(options, data) {\n  var _a;\n\n  const dataFields = {};\n\n  for (const row of data) {\n    const dataType = (_a = row.type) !== null && _a !== void 0 ? _a : 'data';\n\n    if (typeof row.value === 'number') {\n      dataFields[dataType + ':number.' + row.key] = String(row.value);\n    } else if (typeof row.value === 'boolean') {\n      dataFields[dataType + ':bool.' + row.key] = row.value ? 'true' : 'false';\n    } else {\n      dataFields[dataType + '.' + row.key] = row.value;\n    }\n  }\n\n  return Object.assign({}, options, dataFields);\n}\n\nclass ExplorerApi {\n  constructor(endpoint, namespace, args) {\n    this.endpoint = endpoint;\n    this.namespace = namespace;\n\n    if (args.fetch) {\n      this.fetchBuiltin = args.fetch;\n    } else {\n      this.fetchBuiltin = window.fetch;\n    }\n\n    this.action = (async () => {\n      return new Explorer_1.default((await this.getConfig()).contract, this);\n    })();\n  }\n\n  async getConfig() {\n    return await this.fetchEndpoint('/v1/config', {});\n  }\n\n  async getAssets(options = {}, page = 1, limit = 100, data = []) {\n    return await this.fetchEndpoint('/v1/assets', Object.assign({\n      page,\n      limit\n    }, buildDataOptions(options, data)));\n  }\n\n  async countAssets(options, data = []) {\n    return await this.countEndpoint('/v1/assets', buildDataOptions(options, data));\n  }\n\n  async getAsset(id) {\n    return await this.fetchEndpoint('/v1/assets/' + id, {});\n  }\n\n  async getAssetStats(id) {\n    return await this.fetchEndpoint('/v1/assets/' + id + '/stats', {});\n  }\n\n  async getAssetLogs(id, page = 1, limit = 100, order = 'desc') {\n    return await this.fetchEndpoint('/v1/assets/' + id + '/logs', {\n      page,\n      limit,\n      order\n    });\n  }\n\n  async getCollections(options = {}, page = 1, limit = 100) {\n    return await this.fetchEndpoint('/v1/collections', Object.assign({\n      page,\n      limit\n    }, options));\n  }\n\n  async countCollections(options = {}) {\n    return await this.countEndpoint('/v1/collections', options);\n  }\n\n  async getCollection(name) {\n    return await this.fetchEndpoint('/v1/collections/' + name, {});\n  }\n\n  async getCollectionStats(name) {\n    return await this.fetchEndpoint('/v1/collections/' + name + '/stats', {});\n  }\n\n  async getCollectionLogs(name, page = 1, limit = 100, order = 'desc') {\n    return await this.fetchEndpoint('/v1/collections/' + name + '/logs', {\n      page,\n      limit,\n      order\n    });\n  }\n\n  async getSchemas(options = {}, page = 1, limit = 100) {\n    return await this.fetchEndpoint('/v1/schemas', Object.assign({\n      page,\n      limit\n    }, options));\n  }\n\n  async countSchemas(options = {}) {\n    return await this.countEndpoint('/v1/schemas', options);\n  }\n\n  async getSchema(collection, name) {\n    return await this.fetchEndpoint('/v1/schemas/' + collection + '/' + name, {});\n  }\n\n  async getSchemaStats(collection, name) {\n    return await this.fetchEndpoint('/v1/schemas/' + collection + '/' + name + '/stats', {});\n  }\n\n  async getSchemaLogs(collection, name, page = 1, limit = 100, order = 'desc') {\n    return await this.fetchEndpoint('/v1/schemas/' + collection + '/' + name + '/logs', {\n      page,\n      limit,\n      order\n    });\n  }\n\n  async getTemplates(options = {}, page = 1, limit = 100, data = []) {\n    return await this.fetchEndpoint('/v1/templates', Object.assign({\n      page,\n      limit\n    }, buildDataOptions(options, data)));\n  }\n\n  async countTemplates(options = {}, data = []) {\n    return await this.countEndpoint('/v1/templates', buildDataOptions(options, data));\n  }\n\n  async getTemplate(collection, id) {\n    return await this.fetchEndpoint('/v1/templates/' + collection + '/' + id, {});\n  }\n\n  async getTemplateStats(collection, name) {\n    return await this.fetchEndpoint('/v1/templates/' + collection + '/' + name + '/stats', {});\n  }\n\n  async getTemplateLogs(collection, id, page = 1, limit = 100, order = 'desc') {\n    return await this.fetchEndpoint('/v1/templates/' + collection + '/' + id + '/logs', {\n      page,\n      limit,\n      order\n    });\n  }\n\n  async getTransfers(options = {}, page = 1, limit = 100) {\n    return await this.fetchEndpoint('/v1/transfers', Object.assign({\n      page,\n      limit\n    }, options));\n  }\n\n  async countTransfers(options = {}) {\n    return await this.countEndpoint('/v1/transfers', options);\n  }\n\n  async getOffers(options = {}, page = 1, limit = 100) {\n    return await this.fetchEndpoint('/v1/offers', Object.assign({\n      page,\n      limit\n    }, options));\n  }\n\n  async countOffers(options = {}) {\n    return await this.countEndpoint('/v1/offers', options);\n  }\n\n  async getOffer(id) {\n    return await this.fetchEndpoint('/v1/offers/' + id, {});\n  }\n\n  async getAccounts(options = {}, page = 1, limit = 100) {\n    return await this.fetchEndpoint('/v1/accounts', Object.assign({\n      page,\n      limit\n    }, options));\n  }\n\n  async getBurns(options = {}, page = 1, limit = 100) {\n    return await this.fetchEndpoint('/v1/burns', Object.assign({\n      page,\n      limit\n    }, options));\n  }\n\n  async countAccounts(options = {}) {\n    return await this.countEndpoint('/v1/accounts', options);\n  }\n\n  async getAccount(account, options = {}) {\n    return await this.fetchEndpoint('/v1/accounts/' + account, options);\n  }\n\n  async getAccountCollection(account, collection) {\n    return await this.fetchEndpoint('/v1/accounts/' + account + '/' + collection, {});\n  }\n\n  async getAccountBurns(account, options = {}) {\n    return await this.fetchEndpoint('/v1/burns/' + account, options);\n  }\n\n  async fetchEndpoint(path, args) {\n    let response, json;\n    const f = this.fetchBuiltin;\n    const queryString = Object.keys(args).map(key => {\n      let value = args[key];\n\n      if (value === true) {\n        value = 'true';\n      }\n\n      if (value === false) {\n        value = 'false';\n      }\n\n      return key + '=' + encodeURIComponent(value);\n    }).join('&');\n\n    try {\n      response = await f(this.endpoint + '/' + this.namespace + path + (queryString.length > 0 ? '?' + queryString : ''));\n      json = await response.json();\n    } catch (e) {\n      throw new ApiError_1.default(e.message, 500);\n    }\n\n    if (response.status !== 200) {\n      throw new ApiError_1.default(json.message, response.status);\n    }\n\n    if (!json.success) {\n      throw new ApiError_1.default(json.message, response.status);\n    }\n\n    return json.data;\n  }\n\n  async countEndpoint(path, args) {\n    const res = await this.fetchEndpoint(path + '/_count', args);\n    return parseInt(res, 10);\n  }\n\n}\n\nexports.default = ExplorerApi;","map":{"version":3,"sources":["/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/atomicassets/build/API/Explorer/index.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","Explorer_1","require","ApiError_1","buildDataOptions","options","data","_a","dataFields","row","dataType","type","key","String","assign","ExplorerApi","constructor","endpoint","namespace","args","fetch","fetchBuiltin","window","action","default","getConfig","contract","fetchEndpoint","getAssets","page","limit","countAssets","countEndpoint","getAsset","id","getAssetStats","getAssetLogs","order","getCollections","countCollections","getCollection","name","getCollectionStats","getCollectionLogs","getSchemas","countSchemas","getSchema","collection","getSchemaStats","getSchemaLogs","getTemplates","countTemplates","getTemplate","getTemplateStats","getTemplateLogs","getTransfers","countTransfers","getOffers","countOffers","getOffer","getAccounts","getBurns","countAccounts","getAccount","account","getAccountCollection","getAccountBurns","path","response","json","f","queryString","keys","map","encodeURIComponent","join","length","e","message","status","success","res","parseInt"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Explorer_1 = __importDefault(require(\"../../Actions/Explorer\"));\nconst ApiError_1 = __importDefault(require(\"../../Errors/ApiError\"));\nfunction buildDataOptions(options, data) {\n    var _a;\n    const dataFields = {};\n    for (const row of data) {\n        const dataType = (_a = row.type) !== null && _a !== void 0 ? _a : 'data';\n        if (typeof row.value === 'number') {\n            dataFields[dataType + ':number.' + row.key] = String(row.value);\n        }\n        else if (typeof row.value === 'boolean') {\n            dataFields[dataType + ':bool.' + row.key] = row.value ? 'true' : 'false';\n        }\n        else {\n            dataFields[dataType + '.' + row.key] = row.value;\n        }\n    }\n    return Object.assign({}, options, dataFields);\n}\nclass ExplorerApi {\n    constructor(endpoint, namespace, args) {\n        this.endpoint = endpoint;\n        this.namespace = namespace;\n        if (args.fetch) {\n            this.fetchBuiltin = args.fetch;\n        }\n        else {\n            this.fetchBuiltin = window.fetch;\n        }\n        this.action = (async () => {\n            return new Explorer_1.default((await this.getConfig()).contract, this);\n        })();\n    }\n    async getConfig() {\n        return await this.fetchEndpoint('/v1/config', {});\n    }\n    async getAssets(options = {}, page = 1, limit = 100, data = []) {\n        return await this.fetchEndpoint('/v1/assets', Object.assign({ page, limit }, buildDataOptions(options, data)));\n    }\n    async countAssets(options, data = []) {\n        return await this.countEndpoint('/v1/assets', buildDataOptions(options, data));\n    }\n    async getAsset(id) {\n        return await this.fetchEndpoint('/v1/assets/' + id, {});\n    }\n    async getAssetStats(id) {\n        return await this.fetchEndpoint('/v1/assets/' + id + '/stats', {});\n    }\n    async getAssetLogs(id, page = 1, limit = 100, order = 'desc') {\n        return await this.fetchEndpoint('/v1/assets/' + id + '/logs', { page, limit, order });\n    }\n    async getCollections(options = {}, page = 1, limit = 100) {\n        return await this.fetchEndpoint('/v1/collections', Object.assign({ page, limit }, options));\n    }\n    async countCollections(options = {}) {\n        return await this.countEndpoint('/v1/collections', options);\n    }\n    async getCollection(name) {\n        return await this.fetchEndpoint('/v1/collections/' + name, {});\n    }\n    async getCollectionStats(name) {\n        return await this.fetchEndpoint('/v1/collections/' + name + '/stats', {});\n    }\n    async getCollectionLogs(name, page = 1, limit = 100, order = 'desc') {\n        return await this.fetchEndpoint('/v1/collections/' + name + '/logs', { page, limit, order });\n    }\n    async getSchemas(options = {}, page = 1, limit = 100) {\n        return await this.fetchEndpoint('/v1/schemas', Object.assign({ page, limit }, options));\n    }\n    async countSchemas(options = {}) {\n        return await this.countEndpoint('/v1/schemas', options);\n    }\n    async getSchema(collection, name) {\n        return await this.fetchEndpoint('/v1/schemas/' + collection + '/' + name, {});\n    }\n    async getSchemaStats(collection, name) {\n        return await this.fetchEndpoint('/v1/schemas/' + collection + '/' + name + '/stats', {});\n    }\n    async getSchemaLogs(collection, name, page = 1, limit = 100, order = 'desc') {\n        return await this.fetchEndpoint('/v1/schemas/' + collection + '/' + name + '/logs', { page, limit, order });\n    }\n    async getTemplates(options = {}, page = 1, limit = 100, data = []) {\n        return await this.fetchEndpoint('/v1/templates', Object.assign({ page, limit }, buildDataOptions(options, data)));\n    }\n    async countTemplates(options = {}, data = []) {\n        return await this.countEndpoint('/v1/templates', buildDataOptions(options, data));\n    }\n    async getTemplate(collection, id) {\n        return await this.fetchEndpoint('/v1/templates/' + collection + '/' + id, {});\n    }\n    async getTemplateStats(collection, name) {\n        return await this.fetchEndpoint('/v1/templates/' + collection + '/' + name + '/stats', {});\n    }\n    async getTemplateLogs(collection, id, page = 1, limit = 100, order = 'desc') {\n        return await this.fetchEndpoint('/v1/templates/' + collection + '/' + id + '/logs', { page, limit, order });\n    }\n    async getTransfers(options = {}, page = 1, limit = 100) {\n        return await this.fetchEndpoint('/v1/transfers', Object.assign({ page, limit }, options));\n    }\n    async countTransfers(options = {}) {\n        return await this.countEndpoint('/v1/transfers', options);\n    }\n    async getOffers(options = {}, page = 1, limit = 100) {\n        return await this.fetchEndpoint('/v1/offers', Object.assign({ page, limit }, options));\n    }\n    async countOffers(options = {}) {\n        return await this.countEndpoint('/v1/offers', options);\n    }\n    async getOffer(id) {\n        return await this.fetchEndpoint('/v1/offers/' + id, {});\n    }\n    async getAccounts(options = {}, page = 1, limit = 100) {\n        return await this.fetchEndpoint('/v1/accounts', Object.assign({ page, limit }, options));\n    }\n    async getBurns(options = {}, page = 1, limit = 100) {\n        return await this.fetchEndpoint('/v1/burns', Object.assign({ page, limit }, options));\n    }\n    async countAccounts(options = {}) {\n        return await this.countEndpoint('/v1/accounts', options);\n    }\n    async getAccount(account, options = {}) {\n        return await this.fetchEndpoint('/v1/accounts/' + account, options);\n    }\n    async getAccountCollection(account, collection) {\n        return await this.fetchEndpoint('/v1/accounts/' + account + '/' + collection, {});\n    }\n    async getAccountBurns(account, options = {}) {\n        return await this.fetchEndpoint('/v1/burns/' + account, options);\n    }\n    async fetchEndpoint(path, args) {\n        let response, json;\n        const f = this.fetchBuiltin;\n        const queryString = Object.keys(args).map((key) => {\n            let value = args[key];\n            if (value === true) {\n                value = 'true';\n            }\n            if (value === false) {\n                value = 'false';\n            }\n            return key + '=' + encodeURIComponent(value);\n        }).join('&');\n        try {\n            response = await f(this.endpoint + '/' + this.namespace + path + (queryString.length > 0 ? '?' + queryString : ''));\n            json = await response.json();\n        }\n        catch (e) {\n            throw new ApiError_1.default(e.message, 500);\n        }\n        if (response.status !== 200) {\n            throw new ApiError_1.default(json.message, response.status);\n        }\n        if (!json.success) {\n            throw new ApiError_1.default(json.message, response.status);\n        }\n        return json.data;\n    }\n    async countEndpoint(path, args) {\n        const res = await this.fetchEndpoint(path + '/_count', args);\n        return parseInt(res, 10);\n    }\n}\nexports.default = ExplorerApi;\n"]},"metadata":{},"sourceType":"script"}