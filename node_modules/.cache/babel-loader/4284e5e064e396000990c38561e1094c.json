{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{JsonRpc}from\"eosjs\";import{deserialize,ObjectSchema}from\"atomicassets\";import React from\"react\";import{Button,Card,Link,CardHeader,Typography,CardContent,Grid}from\"@material-ui/core\";import Form from\"react-bootstrap/Form\";import\"bootstrap/dist/css/bootstrap.min.css\";import\"./droplist.css\";var defaultState={activeUser:null,accountName:\"\",dropItems:\"\",drops:[],statusDisplay:\"\",loading:false};var ourNetwork={chainId:\"1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4\",rpcEndpoints:[{protocol:\"https\",host:\"chain.wax.io\",port:\"\"}]};var picture={height:\"250px\",width:\"150px\"};var cardstyleGreen={border:10,borderColor:\"green\",borderStyle:\"solid\"};var cardstyleRed={border:10,borderColor:\"red\",borderStyle:\"solid\"};var DropListApp=/*#__PURE__*/function(_React$Component){_inherits(DropListApp,_React$Component);var _super=_createSuper(DropListApp);function DropListApp(props){var _this;_classCallCheck(this,DropListApp);_this=_super.call(this,props);_this.renderLogoutBtn=function(){};_this.handleDropUpdate=function(event){var etv=event.target.value;_this.setState(function(state){return _objectSpread(_objectSpread({},_this.state),{},{dropItems:etv});});};_this.searchDrop=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var lb,newAsset,haveCollection,_loop,tid;return _regeneratorRuntime.wrap(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:lb=\"0\";newAsset=\"1\";haveCollection={};_this.setState(function(state){return _objectSpread(_objectSpread({},_this.state),{},{loading:true});});_loop=/*#__PURE__*/_regeneratorRuntime.mark(function _loop(){var resp,_loop2,itemNdx;return _regeneratorRuntime.wrap(function _loop$(_context){while(1){switch(_context.prev=_context.next){case 0:newAsset=lb;_context.next=3;return _this.searchAssets(lb);case 3:resp=_context.sent;_loop2=function _loop2(itemNdx){lb=resp.rows[itemNdx].asset_id;tid=resp.rows[itemNdx].template_id;var searchIndex=_this.state.drops.findIndex(function(d){return d.template_id===resp.rows[itemNdx].template_id;});if(searchIndex>=0){var itm=_this.state.drops[searchIndex];itm.numberHad++;haveCollection[tid]=1;_this.state.drops[searchIndex]=itm;_this.setState(function(state){return _objectSpread(_objectSpread({},_this.state),{},{have:Object.keys(haveCollection).length,drops:_this.state.drops.sort(function(a,b){return a.numberHad-b.numberHad;})});});}};for(itemNdx in resp.rows){_loop2(itemNdx);}case 6:case\"end\":return _context.stop();}}},_loop);});case 5:if(!(lb!==newAsset)){_context2.next=9;break;}return _context2.delegateYield(_loop(),\"t0\",7);case 7:_context2.next=5;break;case 9:_this.setState(function(state){return _objectSpread(_objectSpread({},_this.state),{},{loading:false});});case 10:case\"end\":return _context2.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.renderDropForm=function(){var dropItems=_this.state.dropItems;return/*#__PURE__*/React.createElement(\"div\",null,_this.state.loading?/*#__PURE__*/React.createElement(\"div\",{style:{position:\"absolute\",backgroundPosition:\"center\",zIndex:\"100\",top:\"50px\",width:'100%',height:'400px',backgroundRepeat:'no-repeat',backgroundImage:'url(Square-1s-200px.gif)'}}):'',/*#__PURE__*/React.createElement(\"div\",{style:{position:\"relative\",marginLeft:\"auto\",marginRight:\"auto\",width:\"100%\",marginTop:\"40px\",display:\"table\",marginBottom:\"10px\"}},/*#__PURE__*/React.createElement(\"div\",{style:{position:\"relative\",verticalAlign:\"middle\",width:\"100%\",display:\"table-cell\"}},/*#__PURE__*/React.createElement(\"h2\",{style:{marginBottom:\"40px\",textAlign:\"center\"}},\"Draco Dice BCH Physical Collection Tools\"),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"550px\",margin:\"auto\",verticalAlign:\"middle\"}},/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"dropItems\"},/*#__PURE__*/React.createElement(\"div\",{style:{width:\"150%\"}},/*#__PURE__*/React.createElement(\"div\",{style:{width:\"300px\",float:\"left\"}},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",name:\"dropItems\",placeholder:\"Wallet\",value:dropItems,onChange:_this.handleDropUpdate})),/*#__PURE__*/React.createElement(\"div\",{style:{marginLeft:\"305px\"}},/*#__PURE__*/React.createElement(Button,{onClick:_this.searchDrop,variant:\"contained\"},\"Search\")))),/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle2\",component:\"h2\"},_this.state.statusDisplay))),/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"auto\",textAlign:\"center\",verticalAlign:\"middle\",paddingBottom:\"50px\",paddingTop:\"25px\",width:\"900px\"}},/*#__PURE__*/React.createElement(\"h3\",null,\"BCH Collection Draco Dice (Have \",_this.state.have,\" of\",\" \",_this.state.ctr,\")\"),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:4},_this.state.drops.map(function(item,i){var _item$collection_name,_item$drop_id;var desc=item.name;var have=item.numberHad;var img=\"\";if(item.imgTag!=null&&item.imgTag.length>0){img=/*#__PURE__*/React.createElement(\"img\",{style:picture,src:item.imgTag,alt:\"bch dice\"});}return/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:4,key:item.drop_id},/*#__PURE__*/React.createElement(\"div\",{style:{cursor:'pointer'},onClick:function onClick(){return window.open('https://wax.atomichub.io/market?collection_name=dracodice&order=asc&schema_name=bcheroes1&sort=price&symbol=WAX&template_id='+item.template_id,'_blank');}},/*#__PURE__*/React.createElement(Card,{style:have>0?cardstyleGreen:cardstyleRed},/*#__PURE__*/React.createElement(CardHeader,{title:(_item$collection_name=item.collection_name)!==null&&_item$collection_name!==void 0?_item$collection_name:\"\",subheader:(_item$drop_id=item.drop_id)!==null&&_item$drop_id!==void 0?_item$drop_id:\"\"}),/*#__PURE__*/React.createElement(CardContent,null,img,/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:\"textSecondary\",component:\"p\"},desc,/*#__PURE__*/React.createElement(\"br\",null),\"Number of Assets: \",have)))));}))))),\" \");};_this.state=_objectSpread(_objectSpread({},defaultState),{},{rows:[],drops:[],ctr:0,have:0,rpc:new JsonRpc(\"\".concat(ourNetwork.rpcEndpoints[0].protocol,\"://\").concat(ourNetwork.rpcEndpoints[0].host))});_this.renderModalButton=_this.renderModalButton.bind(_assertThisInitialized(_this));_this.handleDropUpdate=_this.handleDropUpdate.bind(_assertThisInitialized(_this));_this.searchDrop=_this.searchDrop.bind(_assertThisInitialized(_this));_this.renderDropForm=_this.renderDropForm.bind(_assertThisInitialized(_this));_this.buyDrop=_this.buyDrop.bind(_assertThisInitialized(_this));_this.partition=function(str,n){var aa=[];var i,l;for(i=0,l=str.length;i<l;i+=n){aa.push(str.substr(i,n));}return aa;};return _this;}_createClass(DropListApp,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(\"run\");this._asyncRequest=this.state.rpc.get_table_rows({json:true,code:\"atomicassets\",scope:\"dracodice\",table:\"templates\",lower_bound:\"356879\",limit:1000,reverse:false,show_payer:false}).then(function(resp){_this2._asyncRequest=null;var ctr=0;for(var itemNdx in resp.rows){var item=resp.rows[itemNdx];if(item.schema_name===\"bcheroes1\"){ctr++;var os=ObjectSchema([{name:\"name\",type:\"string\"},{name:\"img\",type:\"image\"},{name:\"series\",type:\"string\"},{name:\"rarity\",type:\"string\"},{name:\"material\",type:\"string\"},{name:\"style\",type:\"string\"},{name:\"face values\",type:\"string\"},{name:\"gameimg\",type:\"image\"},{name:\"video\",type:\"string\"},{name:\"shape\",type:\"string\"}]);var deserializedData=deserialize(item.immutable_serialized_data,os);item.name=deserializedData.name;item.numberHad=0;// console.log(item);\nitem.imgTag=\"https://ipfs.io/ipfs/\"+deserializedData.img;_this2.state.drops.push(item);}}_this2.setState(function(state){return _objectSpread(_objectSpread({},_this2.state),{},{ctr:ctr,drops:_this2.state.drops});});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this._asyncRequest){this._asyncRequest.cancel();}}},{key:\"buyDrop\",value:function(){var _buyDrop=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(buyId,pri){return _regeneratorRuntime.wrap(function _callee2$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.buyClaimContract(buyId,pri);case 1:case\"end\":return _context3.stop();}}},_callee2,this);}));function buyDrop(_x2,_x3){return _buyDrop.apply(this,arguments);}return buyDrop;}()},{key:\"componentDidUpdate\",value:function componentDidUpdate(){}},{key:\"renderModalButton\",value:function renderModalButton(){return/*#__PURE__*/React.createElement(\"p\",{className:\"ual-btn-wrapper\"});}},{key:\"searchAssets\",value:function(){var _searchAssets=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(startingAsset){var resp;return _regeneratorRuntime.wrap(function _callee3$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.state.rpc.get_table_rows({json:true,code:\"atomicassets\",scope:this.state.dropItems,table:\"assets\",lower_bound:startingAsset,limit:1000,reverse:false,show_payer:false});case 2:resp=_context4.sent;return _context4.abrupt(\"return\",resp);case 4:case\"end\":return _context4.stop();}}},_callee3,this);}));function searchAssets(_x4){return _searchAssets.apply(this,arguments);}return searchAssets;}()},{key:\"render\",value:function render(){return this.renderDropForm();}}]);return DropListApp;}(React.Component);DropListApp.displayName=\"BCH Draco collection\";export default DropListApp;","map":{"version":3,"sources":["/Users/kevinbadinger/eos/reactdemo/WCWReact/src/components/droplist.jsx"],"names":["JsonRpc","deserialize","ObjectSchema","React","Button","Card","Link","CardHeader","Typography","CardContent","Grid","Form","defaultState","activeUser","accountName","dropItems","drops","statusDisplay","loading","ourNetwork","chainId","rpcEndpoints","protocol","host","port","picture","height","width","cardstyleGreen","border","borderColor","borderStyle","cardstyleRed","DropListApp","props","renderLogoutBtn","handleDropUpdate","event","etv","target","value","setState","state","searchDrop","lb","newAsset","haveCollection","searchAssets","resp","itemNdx","rows","asset_id","tid","template_id","searchIndex","findIndex","d","itm","numberHad","have","Object","keys","length","sort","a","b","renderDropForm","position","backgroundPosition","zIndex","top","backgroundRepeat","backgroundImage","marginLeft","marginRight","marginTop","display","marginBottom","verticalAlign","textAlign","margin","float","paddingBottom","paddingTop","ctr","map","item","i","desc","name","img","imgTag","drop_id","cursor","window","open","collection_name","rpc","renderModalButton","bind","buyDrop","partition","str","n","aa","l","push","substr","console","log","_asyncRequest","get_table_rows","json","code","scope","table","lower_bound","limit","reverse","show_payer","then","schema_name","os","type","deserializedData","immutable_serialized_data","cancel","buyId","pri","buyClaimContract","startingAsset","Component","displayName"],"mappings":"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","sourcesContent":["import { JsonRpc } from \"eosjs\";\nimport { deserialize, ObjectSchema } from \"atomicassets\";\nimport React from \"react\";\nimport {\n  Button,\n  Card,\n   Link,\n  CardHeader,\n  Typography,\n  CardContent,\n  Grid, \n} from \"@material-ui/core\";\nimport Form from \"react-bootstrap/Form\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./droplist.css\";\n \nconst defaultState = {\n  activeUser: null,\n  accountName: \"\",\n  dropItems: \"\",\n  drops: [],\n  statusDisplay: \"\",\n  loading: false,\n};\n\nvar ourNetwork = {\n  chainId: \"1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4\",\n  rpcEndpoints: [{ protocol: \"https\", host: \"chain.wax.io\", port: \"\" }],\n};\n\nconst picture = {\n  height: \"250px\",\n  width: \"150px\",\n};\n\nconst cardstyleGreen = {\n  border: 10,\n  borderColor: \"green\",\n  borderStyle: \"solid\",\n};\n\nconst cardstyleRed = {\n  border: 10,\n  borderColor: \"red\",\n  borderStyle: \"solid\",\n};\n \n\nclass DropListApp extends React.Component {\n  static displayName = \"BCH Draco collection\";\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...defaultState,\n      rows: [],\n      drops: [],\n      ctr: 0,\n      have: 0,\n      rpc: new JsonRpc(\n        `${ourNetwork.rpcEndpoints[0].protocol}://${ourNetwork.rpcEndpoints[0].host}`\n      ),\n    };\n\n    this.renderModalButton = this.renderModalButton.bind(this);\n    this.handleDropUpdate = this.handleDropUpdate.bind(this);\n    this.searchDrop = this.searchDrop.bind(this);\n\n    this.renderDropForm = this.renderDropForm.bind(this);\n    this.buyDrop = this.buyDrop.bind(this);\n \n    this.partition = (str, n) => {\n      var aa = [];\n      var i, l;\n      for (i = 0, l = str.length; i < l; i += n) {\n        aa.push(str.substr(i, n));\n      }\n      return aa;\n    };\n  }\n\n  componentDidMount() {\n    console.log(\"run\");\n\n    this._asyncRequest = this.state.rpc\n      .get_table_rows({\n        json: true,\n        code: \"atomicassets\",\n        scope: \"dracodice\",\n        table: \"templates\",\n        lower_bound: \"356879\",\n        limit: 1000,\n        reverse: false,\n        show_payer: false,\n      })\n      .then((resp) => {\n        this._asyncRequest = null;\n\n        var ctr = 0;\n\n        for (let itemNdx in resp.rows) {\n          let item = resp.rows[itemNdx];\n\n          if (item.schema_name === \"bcheroes1\") {\n            ctr++;\n\n            let os = ObjectSchema([\n              { name: \"name\", type: \"string\" },\n              { name: \"img\", type: \"image\" },\n              { name: \"series\", type: \"string\" },\n              { name: \"rarity\", type: \"string\" },\n              { name: \"material\", type: \"string\" },\n              { name: \"style\", type: \"string\" },\n              { name: \"face values\", type: \"string\" },\n              { name: \"gameimg\", type: \"image\" },\n              { name: \"video\", type: \"string\" },\n              { name: \"shape\", type: \"string\" },\n            ]);\n            let deserializedData = deserialize(\n              item.immutable_serialized_data,\n              os\n            );\n\n            item.name = deserializedData.name;\n            item.numberHad = 0;\n\n            // console.log(item);\n\n            item.imgTag = \"https://ipfs.io/ipfs/\" + deserializedData.img;\n\n            this.state.drops.push(item);\n          }\n        }\n\n        this.setState((state) => ({\n          ...this.state,\n          ctr: ctr,\n          drops: this.state.drops,\n        }));\n      });\n  }\n\n  componentWillUnmount() {\n    if (this._asyncRequest) {\n      this._asyncRequest.cancel();\n    }\n  }\n\n  async buyDrop(buyId, pri) {\n    this.buyClaimContract(buyId, pri);\n  }\n\n  componentDidUpdate() {\n  \n \n  }\n\n  renderLogoutBtn = () => {};\n\n  renderModalButton() {\n    return <p className=\"ual-btn-wrapper\"></p>;\n  }\n\n  handleDropUpdate = (event) => {\n    let etv = event.target.value;\n\n    this.setState((state) => ({\n      ...this.state,\n      dropItems: etv,\n    }));\n  };\n\n  searchDrop = async (event) => {\n    var lb = \"0\";\n\n    var newAsset = \"1\";\n\n    var haveCollection = {};\n\n    this.setState((state) => ({\n      ...this.state,\n      loading: true}));\n\n    while (lb !== newAsset) {\n      newAsset = lb;\n\n      let resp = await this.searchAssets(lb);\n\n      for (let itemNdx in resp.rows) {\n        \n          lb = resp.rows[itemNdx].asset_id;\n\n          var tid = resp.rows[itemNdx].template_id;\n\n          const searchIndex = this.state.drops.findIndex(\n            (d) => d.template_id === resp.rows[itemNdx].template_id\n          );\n\n          if (searchIndex >= 0) {\n            let itm = this.state.drops[searchIndex];\n            itm.numberHad++;\n\n            haveCollection[tid] = 1;\n            this.state.drops[searchIndex] = itm;\n            this.setState((state) => ({\n              ...this.state,\n              have: Object.keys(haveCollection).length,\n              drops: this.state.drops.sort(function(a, b){return a.numberHad-b.numberHad}),\n            }));\n          }\n       \n      }\n    }\n\n\n    this.setState((state) => ({\n      ...this.state,\n      loading: false}));\n\n\n  };\n\n  async searchAssets(startingAsset) {\n    let resp = await this.state.rpc.get_table_rows({\n      json: true,\n      code: \"atomicassets\",\n      scope: this.state.dropItems,\n      table: \"assets\",\n      lower_bound: startingAsset,\n      limit: 1000,\n      reverse: false,\n      show_payer: false,\n    });\n\n    return resp;\n  }\n \n\n  renderDropForm = () => {\n    const { dropItems } = this.state;\n\n   \n    return (\n      <div>\n        {this.state.loading ?\n<div style={{position: \"absolute\", backgroundPosition: \"center\", zIndex: \"100\", top: \"50px\", width: '100%', height: '400px', backgroundRepeat: 'no-repeat', backgroundImage: 'url(Square-1s-200px.gif)'}}></div>\n: ''}\n      <div\n        style={{\n          position: \"relative\",\n          marginLeft: \"auto\",\n          marginRight: \"auto\",\n          width: \"100%\",\n          marginTop: \"40px\",\n          display: \"table\",\n          marginBottom: \"10px\",\n        }}\n      >\n        <div\n          style={{\n            position: \"relative\",\n            verticalAlign: \"middle\",\n            width: \"100%\",\n            display: \"table-cell\",\n          }}\n        >\n          <h2 style={{ marginBottom: \"40px\", textAlign: \"center\" }}>\n            Draco Dice BCH Physical Collection Tools\n          </h2>\n\n          <div\n            style={{ width: \"550px\", margin: \"auto\", verticalAlign: \"middle\" }}\n          >\n            <Form>\n              <Form.Group controlId=\"dropItems\">\n                <div style={{ width: \"150%\" }}>\n                  <div style={{ width: \"300px\", float: \"left\" }}>\n                    <Form.Control\n                      type=\"text\"\n                      name=\"dropItems\"\n                      placeholder=\"Wallet\"\n                      value={dropItems}\n                      onChange={this.handleDropUpdate}\n                    />\n                  </div>\n                  <div style={{ marginLeft: \"305px\" }}>\n                    <Button onClick={this.searchDrop} variant=\"contained\">\n                      Search\n                    </Button>\n                  </div>\n                </div>\n              </Form.Group>\n\n              <Typography variant=\"subtitle2\" component=\"h2\">\n                {this.state.statusDisplay}\n              </Typography>\n            </Form>\n          </div>\n\n          <div\n            style={{\n              margin: \"auto\",\n              textAlign: \"center\",\n              verticalAlign: \"middle\",\n              paddingBottom: \"50px\",\n              paddingTop: \"25px\",\n              width: \"900px\",\n            }}\n          >\n            <h3>\n              BCH Collection Draco Dice (Have {this.state.have} of{\" \"}\n              {this.state.ctr})\n            </h3>\n            <Grid container spacing={4}>\n              {this.state.drops.map(function (item, i) {\n                var desc = item.name;\n\n                var have = item.numberHad;\n\n                \n                let img = \"\";\n\n                if (item.imgTag != null && item.imgTag.length > 0) {\n                  img = <img style={picture} src={item.imgTag}  alt=\"bch dice\" />;\n                }\n\n                return (\n                  <Grid item xs={12} sm={6} md={4} key={item.drop_id}>\n                    <div style={{ cursor: 'pointer'}} onClick={() => window.open('https://wax.atomichub.io/market?collection_name=dracodice&order=asc&schema_name=bcheroes1&sort=price&symbol=WAX&template_id=' + item.template_id, '_blank')}> \n                    <Card  style={have > 0 ? cardstyleGreen : cardstyleRed}>\n                      <CardHeader\n                        title={item.collection_name ?? \"\"}\n                        subheader={item.drop_id ?? \"\"}\n                      />\n                      <CardContent>\n                        {img}\n                        <Typography\n                          variant=\"body2\"\n                          color=\"textSecondary\"\n                          component=\"p\"\n                        >\n                          {desc}\n                          <br />\n                          Number of Assets: {have}\n                        </Typography>\n                      </CardContent>\n                    </Card>\n                    </div>\n                  </Grid>\n                );\n              })}\n            </Grid>\n          </div>\n        </div>\n        </div> </div>\n   \n   \n   );\n  };\n\n  render() {\n    return this.renderDropForm();\n  }\n}\n\nexport default DropListApp;\n"]},"metadata":{},"sourceType":"module"}