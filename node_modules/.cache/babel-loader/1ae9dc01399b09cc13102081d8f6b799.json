{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Schema_1 = require(\"../../Schema\");\n\nvar Collection_1 = __importDefault(require(\"./Collection\"));\n\nvar RpcSchema = /*#__PURE__*/function () {\n  function RpcSchema(api, collection, name, data) {\n    var cache = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n\n    _classCallCheck(this, RpcSchema);\n\n    this.api = api;\n    this.collection = collection;\n    this.name = name;\n    this._data = new Promise( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve, reject) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!data) {\n                  _context.next = 4;\n                  break;\n                }\n\n                resolve(data);\n                _context.next = 15;\n                break;\n\n              case 4:\n                _context.prev = 4;\n                _context.t0 = resolve;\n                _context.next = 8;\n                return api.queue.fetchSchema(collection, name, cache);\n\n              case 8:\n                _context.t1 = _context.sent;\n                (0, _context.t0)(_context.t1);\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t2 = _context[\"catch\"](4);\n                reject(_context.t2);\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[4, 12]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    this._collection = new Promise( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(resolve, reject) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                try {\n                  resolve(new Collection_1.default(api, collection, undefined, cache));\n                } catch (e) {\n                  reject(e);\n                }\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  }\n\n  _createClass(RpcSchema, [{\n    key: \"format\",\n    value: function () {\n      var _format = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.t0 = Schema_1;\n                _context3.next = 3;\n                return this._data;\n\n              case 3:\n                _context3.t1 = _context3.sent.format;\n                return _context3.abrupt(\"return\", _context3.t0.ObjectSchema.call(_context3.t0, _context3.t1));\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function format() {\n        return _format.apply(this, arguments);\n      }\n\n      return format;\n    }()\n  }, {\n    key: \"rawFormat\",\n    value: function () {\n      var _rawFormat = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this._data;\n\n              case 2:\n                return _context4.abrupt(\"return\", _context4.sent.format);\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function rawFormat() {\n        return _rawFormat.apply(this, arguments);\n      }\n\n      return rawFormat;\n    }()\n  }, {\n    key: \"toObject\",\n    value: function () {\n      var _toObject = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.t0 = this.collection;\n                _context5.t1 = this.name;\n                _context5.next = 4;\n                return this.rawFormat();\n\n              case 4:\n                _context5.t2 = _context5.sent;\n                return _context5.abrupt(\"return\", {\n                  collection_name: _context5.t0,\n                  schema_name: _context5.t1,\n                  format: _context5.t2\n                });\n\n              case 6:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function toObject() {\n        return _toObject.apply(this, arguments);\n      }\n\n      return toObject;\n    }()\n  }]);\n\n  return RpcSchema;\n}();\n\nexports.default = RpcSchema;","map":{"version":3,"sources":["/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/atomicassets/build/API/Rpc/Schema.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","Schema_1","require","Collection_1","RpcSchema","api","collection","name","data","cache","_data","Promise","resolve","reject","queue","fetchSchema","_collection","default","undefined","e","format","ObjectSchema","rawFormat","collection_name","schema_name"],"mappings":"AAAA;;;;;;;;;;AACA,IAAIA,eAAe,GAAI,QAAQ,KAAKA,eAAd,IAAkC,UAAUC,GAAV,EAAe;AACnE,SAAQA,GAAG,IAAIA,GAAG,CAACC,UAAZ,GAA0BD,GAA1B,GAAgC;AAAE,eAAWA;AAAb,GAAvC;AACH,CAFD;;AAGAE,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAMC,QAAQ,GAAGC,OAAO,CAAC,cAAD,CAAxB;;AACA,IAAMC,YAAY,GAAGT,eAAe,CAACQ,OAAO,CAAC,cAAD,CAAR,CAApC;;IACME,S;AACF,qBAAYC,GAAZ,EAAiBC,UAAjB,EAA6BC,IAA7B,EAAmCC,IAAnC,EAAuD;AAAA,QAAdC,KAAc,uEAAN,IAAM;;AAAA;;AACnD,SAAKJ,GAAL,GAAWA,GAAX;AACA,SAAKC,UAAL,GAAkBA,UAAlB;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKG,KAAL,GAAa,IAAIC,OAAJ;AAAA,0EAAY,iBAAOC,OAAP,EAAgBC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA,qBACjBL,IADiB;AAAA;AAAA;AAAA;;AAEjBI,gBAAAA,OAAO,CAACJ,IAAD,CAAP;AAFiB;AAAA;;AAAA;AAAA;AAAA,8BAMbI,OANa;AAAA;AAAA,uBAMCP,GAAG,CAACS,KAAJ,CAAUC,WAAV,CAAsBT,UAAtB,EAAkCC,IAAlC,EAAwCE,KAAxC,CAND;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AASbI,gBAAAA,MAAM,aAAN;;AATa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAZ;;AAAA;AAAA;AAAA;AAAA,QAAb;AAaA,SAAKG,WAAL,GAAmB,IAAIL,OAAJ;AAAA,2EAAY,kBAAOC,OAAP,EAAgBC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAC3B,oBAAI;AACAD,kBAAAA,OAAO,CAAC,IAAIT,YAAY,CAACc,OAAjB,CAAyBZ,GAAzB,EAA8BC,UAA9B,EAA0CY,SAA1C,EAAqDT,KAArD,CAAD,CAAP;AACH,iBAFD,CAGA,OAAOU,CAAP,EAAU;AACNN,kBAAAA,MAAM,CAACM,CAAD,CAAN;AACH;;AAN0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAZ;;AAAA;AAAA;AAAA;AAAA,QAAnB;AAQH;;;;;6EACD;AAAA;AAAA;AAAA;AAAA;AAAA,+BACWlB,QADX;AAAA;AAAA,uBACwC,KAAKS,KAD7C;;AAAA;AAAA,8CACoDU,MADpD;AAAA,+DACoBC,YADpB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;gFAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACkB,KAAKX,KADvB;;AAAA;AAAA,iEAC8BU,MAD9B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;+EAGA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAEyB,KAAKd,UAF9B;AAAA,+BAGqB,KAAKC,IAH1B;AAAA;AAAA,uBAIsB,KAAKe,SAAL,EAJtB;;AAAA;AAAA;AAAA;AAEQC,kBAAAA,eAFR;AAGQC,kBAAAA,WAHR;AAIQJ,kBAAAA,MAJR;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;;;AAQJrB,OAAO,CAACkB,OAAR,GAAkBb,SAAlB","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Schema_1 = require(\"../../Schema\");\nconst Collection_1 = __importDefault(require(\"./Collection\"));\nclass RpcSchema {\n    constructor(api, collection, name, data, cache = true) {\n        this.api = api;\n        this.collection = collection;\n        this.name = name;\n        this._data = new Promise(async (resolve, reject) => {\n            if (data) {\n                resolve(data);\n            }\n            else {\n                try {\n                    resolve(await api.queue.fetchSchema(collection, name, cache));\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }\n        });\n        this._collection = new Promise(async (resolve, reject) => {\n            try {\n                resolve(new Collection_1.default(api, collection, undefined, cache));\n            }\n            catch (e) {\n                reject(e);\n            }\n        });\n    }\n    async format() {\n        return Schema_1.ObjectSchema((await this._data).format);\n    }\n    async rawFormat() {\n        return (await this._data).format;\n    }\n    async toObject() {\n        return {\n            collection_name: this.collection,\n            schema_name: this.name,\n            format: await this.rawFormat()\n        };\n    }\n}\nexports.default = RpcSchema;\n"]},"metadata":{},"sourceType":"script"}