{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Asset_1 = __importDefault(require(\"./Asset\"));\n\nvar RpcOffer = /*#__PURE__*/function () {\n  function RpcOffer(api, id, data, senderAssets, receiverAssets) {\n    var _this = this;\n\n    var cache = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n\n    _classCallCheck(this, RpcOffer);\n\n    this.api = api;\n    this.id = id;\n    this._data = new Promise( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve, reject) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!data) {\n                  _context.next = 4;\n                  break;\n                }\n\n                resolve(data);\n                _context.next = 15;\n                break;\n\n              case 4:\n                _context.prev = 4;\n                _context.t0 = resolve;\n                _context.next = 8;\n                return _this.api.queue.fetchOffer(id, cache);\n\n              case 8:\n                _context.t1 = _context.sent;\n                (0, _context.t0)(_context.t1);\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t2 = _context[\"catch\"](4);\n                reject(_context.t2);\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[4, 12]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    this._senderAssets = new Promise( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(resolve, reject) {\n        var row, inventory;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!senderAssets) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                resolve(senderAssets);\n                _context2.next = 17;\n                break;\n\n              case 4:\n                _context2.prev = 4;\n                _context2.next = 7;\n                return _this._data;\n\n              case 7:\n                row = _context2.sent;\n                _context2.next = 10;\n                return _this.api.queue.fetchAccountAssets(row.sender);\n\n              case 10:\n                inventory = _context2.sent;\n                return _context2.abrupt(\"return\", resolve(row.sender_asset_ids.map(function (assetID) {\n                  var asset = inventory.find(function (assetRow) {\n                    return assetRow.asset_id === assetID;\n                  });\n                  return asset ? new Asset_1.default(_this.api, row.sender, assetID, asset, undefined, undefined, undefined, cache) : assetID;\n                })));\n\n              case 14:\n                _context2.prev = 14;\n                _context2.t0 = _context2[\"catch\"](4);\n                return _context2.abrupt(\"return\", reject(_context2.t0));\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[4, 14]]);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    this._recipientAssets = new Promise( /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(resolve, reject) {\n        var row, inventory;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!receiverAssets) {\n                  _context3.next = 4;\n                  break;\n                }\n\n                resolve(receiverAssets);\n                _context3.next = 17;\n                break;\n\n              case 4:\n                _context3.prev = 4;\n                _context3.next = 7;\n                return _this._data;\n\n              case 7:\n                row = _context3.sent;\n                _context3.next = 10;\n                return _this.api.queue.fetchAccountAssets(row.recipient);\n\n              case 10:\n                inventory = _context3.sent;\n                return _context3.abrupt(\"return\", resolve(row.recipient_asset_ids.map(function (assetID) {\n                  var asset = inventory.find(function (assetRow) {\n                    return assetRow.asset_id === assetID;\n                  });\n                  return asset ? new Asset_1.default(_this.api, row.recipient, assetID, asset, undefined, undefined, undefined, cache) : assetID;\n                })));\n\n              case 14:\n                _context3.prev = 14;\n                _context3.t0 = _context3[\"catch\"](4);\n                return _context3.abrupt(\"return\", reject(_context3.t0));\n\n              case 17:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[4, 14]]);\n      }));\n\n      return function (_x5, _x6) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n  }\n\n  _createClass(RpcOffer, [{\n    key: \"sender\",\n    value: function () {\n      var _sender = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this._data;\n\n              case 2:\n                return _context4.abrupt(\"return\", _context4.sent.sender);\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function sender() {\n        return _sender.apply(this, arguments);\n      }\n\n      return sender;\n    }()\n  }, {\n    key: \"recipient\",\n    value: function () {\n      var _recipient = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this._data;\n\n              case 2:\n                return _context5.abrupt(\"return\", _context5.sent.recipient);\n\n              case 3:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function recipient() {\n        return _recipient.apply(this, arguments);\n      }\n\n      return recipient;\n    }()\n  }, {\n    key: \"senderAssets\",\n    value: function () {\n      var _senderAssets = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this._senderAssets;\n\n              case 2:\n                return _context6.abrupt(\"return\", _context6.sent);\n\n              case 3:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function senderAssets() {\n        return _senderAssets.apply(this, arguments);\n      }\n\n      return senderAssets;\n    }()\n  }, {\n    key: \"recipientAssets\",\n    value: function () {\n      var _recipientAssets = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this._recipientAssets;\n\n              case 2:\n                return _context7.abrupt(\"return\", _context7.sent);\n\n              case 3:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function recipientAssets() {\n        return _recipientAssets.apply(this, arguments);\n      }\n\n      return recipientAssets;\n    }()\n  }, {\n    key: \"memo\",\n    value: function () {\n      var _memo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return this._data;\n\n              case 2:\n                return _context8.abrupt(\"return\", _context8.sent.memo);\n\n              case 3:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function memo() {\n        return _memo.apply(this, arguments);\n      }\n\n      return memo;\n    }()\n  }, {\n    key: \"toObject\",\n    value: function () {\n      var _toObject = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.t0 = this.id;\n                _context11.next = 3;\n                return this.sender();\n\n              case 3:\n                _context11.t1 = _context11.sent;\n                _context11.t2 = Promise;\n                _context11.next = 7;\n                return this.senderAssets();\n\n              case 7:\n                _context11.t3 = _context11.sent.map( /*#__PURE__*/function () {\n                  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(asset) {\n                    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n                      while (1) {\n                        switch (_context9.prev = _context9.next) {\n                          case 0:\n                            if (!(typeof asset === 'string')) {\n                              _context9.next = 4;\n                              break;\n                            }\n\n                            _context9.t0 = asset;\n                            _context9.next = 7;\n                            break;\n\n                          case 4:\n                            _context9.next = 6;\n                            return asset.toObject();\n\n                          case 6:\n                            _context9.t0 = _context9.sent;\n\n                          case 7:\n                            return _context9.abrupt(\"return\", _context9.t0);\n\n                          case 8:\n                          case \"end\":\n                            return _context9.stop();\n                        }\n                      }\n                    }, _callee9);\n                  }));\n\n                  return function (_x7) {\n                    return _ref4.apply(this, arguments);\n                  };\n                }());\n                _context11.next = 10;\n                return _context11.t2.all.call(_context11.t2, _context11.t3);\n\n              case 10:\n                _context11.t4 = _context11.sent;\n                _context11.t5 = {\n                  account: _context11.t1,\n                  assets: _context11.t4\n                };\n                _context11.next = 14;\n                return this.recipient();\n\n              case 14:\n                _context11.t6 = _context11.sent;\n                _context11.t7 = Promise;\n                _context11.next = 18;\n                return this.recipientAssets();\n\n              case 18:\n                _context11.t8 = _context11.sent.map( /*#__PURE__*/function () {\n                  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(asset) {\n                    return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n                      while (1) {\n                        switch (_context10.prev = _context10.next) {\n                          case 0:\n                            if (!(typeof asset === 'string')) {\n                              _context10.next = 4;\n                              break;\n                            }\n\n                            _context10.t0 = asset;\n                            _context10.next = 7;\n                            break;\n\n                          case 4:\n                            _context10.next = 6;\n                            return asset.toObject();\n\n                          case 6:\n                            _context10.t0 = _context10.sent;\n\n                          case 7:\n                            return _context10.abrupt(\"return\", _context10.t0);\n\n                          case 8:\n                          case \"end\":\n                            return _context10.stop();\n                        }\n                      }\n                    }, _callee10);\n                  }));\n\n                  return function (_x8) {\n                    return _ref5.apply(this, arguments);\n                  };\n                }());\n                _context11.next = 21;\n                return _context11.t7.all.call(_context11.t7, _context11.t8);\n\n              case 21:\n                _context11.t9 = _context11.sent;\n                _context11.t10 = {\n                  account: _context11.t6,\n                  assets: _context11.t9\n                };\n                _context11.next = 25;\n                return this.memo();\n\n              case 25:\n                _context11.t11 = _context11.sent;\n                return _context11.abrupt(\"return\", {\n                  offer_id: _context11.t0,\n                  sender: _context11.t5,\n                  recipient: _context11.t10,\n                  memo: _context11.t11\n                });\n\n              case 27:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function toObject() {\n        return _toObject.apply(this, arguments);\n      }\n\n      return toObject;\n    }()\n  }]);\n\n  return RpcOffer;\n}();\n\nexports.default = RpcOffer;","map":{"version":3,"sources":["/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/atomicassets/build/API/Rpc/Offer.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","Asset_1","require","RpcOffer","api","id","data","senderAssets","receiverAssets","cache","_data","Promise","resolve","reject","queue","fetchOffer","_senderAssets","row","fetchAccountAssets","sender","inventory","sender_asset_ids","map","assetID","asset","find","assetRow","asset_id","default","undefined","_recipientAssets","recipient","recipient_asset_ids","memo","toObject","all","account","assets","recipientAssets","offer_id"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Asset_1 = __importDefault(require(\"./Asset\"));\nclass RpcOffer {\n    constructor(api, id, data, senderAssets, receiverAssets, cache = true) {\n        this.api = api;\n        this.id = id;\n        this._data = new Promise(async (resolve, reject) => {\n            if (data) {\n                resolve(data);\n            }\n            else {\n                try {\n                    resolve(await this.api.queue.fetchOffer(id, cache));\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }\n        });\n        this._senderAssets = new Promise(async (resolve, reject) => {\n            if (senderAssets) {\n                resolve(senderAssets);\n            }\n            else {\n                try {\n                    const row = await this._data;\n                    const inventory = await this.api.queue.fetchAccountAssets(row.sender);\n                    return resolve(row.sender_asset_ids.map((assetID) => {\n                        const asset = inventory.find((assetRow) => assetRow.asset_id === assetID);\n                        return asset ? new Asset_1.default(this.api, row.sender, assetID, asset, undefined, undefined, undefined, cache) : assetID;\n                    }));\n                }\n                catch (e) {\n                    return reject(e);\n                }\n            }\n        });\n        this._recipientAssets = new Promise(async (resolve, reject) => {\n            if (receiverAssets) {\n                resolve(receiverAssets);\n            }\n            else {\n                try {\n                    const row = await this._data;\n                    const inventory = await this.api.queue.fetchAccountAssets(row.recipient);\n                    return resolve(row.recipient_asset_ids.map((assetID) => {\n                        const asset = inventory.find((assetRow) => assetRow.asset_id === assetID);\n                        return asset ? new Asset_1.default(this.api, row.recipient, assetID, asset, undefined, undefined, undefined, cache) : assetID;\n                    }));\n                }\n                catch (e) {\n                    return reject(e);\n                }\n            }\n        });\n    }\n    async sender() {\n        return (await this._data).sender;\n    }\n    async recipient() {\n        return (await this._data).recipient;\n    }\n    async senderAssets() {\n        return await this._senderAssets;\n    }\n    async recipientAssets() {\n        return await this._recipientAssets;\n    }\n    async memo() {\n        return (await this._data).memo;\n    }\n    async toObject() {\n        return {\n            offer_id: this.id,\n            sender: {\n                account: await this.sender(),\n                assets: await Promise.all((await this.senderAssets()).map(async (asset) => typeof asset === 'string' ? asset : await asset.toObject()))\n            },\n            recipient: {\n                account: await this.recipient(),\n                assets: await Promise.all((await this.recipientAssets()).map(async (asset) => typeof asset === 'string' ? asset : await asset.toObject()))\n            },\n            memo: await this.memo()\n        };\n    }\n}\nexports.default = RpcOffer;\n"]},"metadata":{},"sourceType":"script"}