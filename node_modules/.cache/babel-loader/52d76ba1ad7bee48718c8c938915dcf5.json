{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Serialization_1 = require(\"../../Serialization\");\n\nvar Collection_1 = __importDefault(require(\"./Collection\"));\n\nvar Schema_1 = __importDefault(require(\"./Schema\"));\n\nvar Template_1 = __importDefault(require(\"./Template\"));\n\nvar RpcAsset = /*#__PURE__*/function () {\n  function RpcAsset(api, owner, id, data, collection, schema, template) {\n    var _this = this;\n\n    var cache = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : true;\n\n    _classCallCheck(this, RpcAsset);\n\n    this.api = api;\n    this.owner = owner;\n    this.id = id;\n    this._data = new Promise( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve, reject) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!data) {\n                  _context.next = 4;\n                  break;\n                }\n\n                resolve(data);\n                _context.next = 15;\n                break;\n\n              case 4:\n                _context.prev = 4;\n                _context.t0 = resolve;\n                _context.next = 8;\n                return api.queue.fetchAsset(owner, id, cache);\n\n              case 8:\n                _context.t1 = _context.sent;\n                (0, _context.t0)(_context.t1);\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t2 = _context[\"catch\"](4);\n                reject(_context.t2);\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[4, 12]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    this._template = new Promise( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(resolve, reject) {\n        var row;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!template) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                resolve(template);\n                _context2.next = 16;\n                break;\n\n              case 4:\n                _context2.prev = 4;\n                _context2.next = 7;\n                return _this._data;\n\n              case 7:\n                row = _context2.sent;\n\n                if (!(Number(row.template_id) < 0)) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", resolve(null));\n\n              case 10:\n                resolve(new Template_1.default(api, row.collection_name, row.template_id, undefined, undefined, cache));\n                _context2.next = 16;\n                break;\n\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](4);\n                reject(_context2.t0);\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[4, 13]]);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    this._collection = new Promise( /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(resolve, reject) {\n        var row;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!collection) {\n                  _context3.next = 4;\n                  break;\n                }\n\n                resolve(collection);\n                _context3.next = 14;\n                break;\n\n              case 4:\n                _context3.prev = 4;\n                _context3.next = 7;\n                return _this._data;\n\n              case 7:\n                row = _context3.sent;\n                resolve(new Collection_1.default(api, row.collection_name, undefined, cache));\n                _context3.next = 14;\n                break;\n\n              case 11:\n                _context3.prev = 11;\n                _context3.t0 = _context3[\"catch\"](4);\n                reject(_context3.t0);\n\n              case 14:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[4, 11]]);\n      }));\n\n      return function (_x5, _x6) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n    this._schema = new Promise( /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(resolve, reject) {\n        var row;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!schema) {\n                  _context4.next = 4;\n                  break;\n                }\n\n                resolve(schema);\n                _context4.next = 14;\n                break;\n\n              case 4:\n                _context4.prev = 4;\n                _context4.next = 7;\n                return _this._data;\n\n              case 7:\n                row = _context4.sent;\n                resolve(new Schema_1.default(api, row.collection_name, row.schema_name, undefined, cache));\n                _context4.next = 14;\n                break;\n\n              case 11:\n                _context4.prev = 11;\n                _context4.t0 = _context4[\"catch\"](4);\n                reject(_context4.t0);\n\n              case 14:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[4, 11]]);\n      }));\n\n      return function (_x7, _x8) {\n        return _ref4.apply(this, arguments);\n      };\n    }());\n  }\n\n  _createClass(RpcAsset, [{\n    key: \"template\",\n    value: function () {\n      var _template = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this._template;\n\n              case 2:\n                return _context5.abrupt(\"return\", _context5.sent);\n\n              case 3:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function template() {\n        return _template.apply(this, arguments);\n      }\n\n      return template;\n    }()\n  }, {\n    key: \"collection\",\n    value: function () {\n      var _collection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this._collection;\n\n              case 2:\n                return _context6.abrupt(\"return\", _context6.sent);\n\n              case 3:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function collection() {\n        return _collection.apply(this, arguments);\n      }\n\n      return collection;\n    }()\n  }, {\n    key: \"schema\",\n    value: function () {\n      var _schema = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this._schema;\n\n              case 2:\n                return _context7.abrupt(\"return\", _context7.sent);\n\n              case 3:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function schema() {\n        return _schema.apply(this, arguments);\n      }\n\n      return schema;\n    }()\n  }, {\n    key: \"backedTokens\",\n    value: function () {\n      var _backedTokens = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return this._data;\n\n              case 2:\n                return _context8.abrupt(\"return\", _context8.sent.backed_tokens);\n\n              case 3:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function backedTokens() {\n        return _backedTokens.apply(this, arguments);\n      }\n\n      return backedTokens;\n    }()\n  }, {\n    key: \"immutableData\",\n    value: function () {\n      var _immutableData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n        var schema, row;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return this.schema();\n\n              case 2:\n                schema = _context9.sent;\n                _context9.next = 5;\n                return this._data;\n\n              case 5:\n                row = _context9.sent;\n                _context9.t0 = Serialization_1;\n                _context9.t1 = row.immutable_serialized_data;\n                _context9.next = 10;\n                return schema.format();\n\n              case 10:\n                _context9.t2 = _context9.sent;\n                return _context9.abrupt(\"return\", _context9.t0.deserialize.call(_context9.t0, _context9.t1, _context9.t2));\n\n              case 12:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function immutableData() {\n        return _immutableData.apply(this, arguments);\n      }\n\n      return immutableData;\n    }()\n  }, {\n    key: \"mutableData\",\n    value: function () {\n      var _mutableData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n        var schema, row;\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.next = 2;\n                return this.schema();\n\n              case 2:\n                schema = _context10.sent;\n                _context10.next = 5;\n                return this._data;\n\n              case 5:\n                row = _context10.sent;\n                _context10.t0 = Serialization_1;\n                _context10.t1 = row.mutable_serialized_data;\n                _context10.next = 10;\n                return schema.format();\n\n              case 10:\n                _context10.t2 = _context10.sent;\n                return _context10.abrupt(\"return\", _context10.t0.deserialize.call(_context10.t0, _context10.t1, _context10.t2));\n\n              case 12:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function mutableData() {\n        return _mutableData.apply(this, arguments);\n      }\n\n      return mutableData;\n    }()\n  }, {\n    key: \"data\",\n    value: function () {\n      var _data = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n        var mutableData, immutableData, template, templateData;\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.next = 2;\n                return this.mutableData();\n\n              case 2:\n                mutableData = _context11.sent;\n                _context11.next = 5;\n                return this.immutableData();\n\n              case 5:\n                immutableData = _context11.sent;\n                _context11.next = 8;\n                return this.template();\n\n              case 8:\n                template = _context11.sent;\n\n                if (!template) {\n                  _context11.next = 15;\n                  break;\n                }\n\n                _context11.next = 12;\n                return template.immutableData();\n\n              case 12:\n                _context11.t0 = _context11.sent;\n                _context11.next = 16;\n                break;\n\n              case 15:\n                _context11.t0 = {};\n\n              case 16:\n                templateData = _context11.t0;\n                return _context11.abrupt(\"return\", Object.assign({}, mutableData, immutableData, templateData));\n\n              case 18:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function data() {\n        return _data.apply(this, arguments);\n      }\n\n      return data;\n    }()\n  }, {\n    key: \"toObject\",\n    value: function () {\n      var _toObject = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n        var template, collection, schema;\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _context12.next = 2;\n                return this.template();\n\n              case 2:\n                template = _context12.sent;\n                _context12.next = 5;\n                return this.collection();\n\n              case 5:\n                collection = _context12.sent;\n                _context12.next = 8;\n                return this.schema();\n\n              case 8:\n                schema = _context12.sent;\n                _context12.t0 = this.id;\n                _context12.next = 12;\n                return collection.toObject();\n\n              case 12:\n                _context12.t1 = _context12.sent;\n                _context12.next = 15;\n                return schema.toObject();\n\n              case 15:\n                _context12.t2 = _context12.sent;\n\n                if (!template) {\n                  _context12.next = 22;\n                  break;\n                }\n\n                _context12.next = 19;\n                return template.toObject();\n\n              case 19:\n                _context12.t3 = _context12.sent;\n                _context12.next = 23;\n                break;\n\n              case 22:\n                _context12.t3 = null;\n\n              case 23:\n                _context12.t4 = _context12.t3;\n                _context12.next = 26;\n                return this.backedTokens();\n\n              case 26:\n                _context12.t5 = _context12.sent;\n                _context12.next = 29;\n                return this.immutableData();\n\n              case 29:\n                _context12.t6 = _context12.sent;\n                _context12.next = 32;\n                return this.mutableData();\n\n              case 32:\n                _context12.t7 = _context12.sent;\n                _context12.next = 35;\n                return this.data();\n\n              case 35:\n                _context12.t8 = _context12.sent;\n                return _context12.abrupt(\"return\", {\n                  asset_id: _context12.t0,\n                  collection: _context12.t1,\n                  schema: _context12.t2,\n                  template: _context12.t4,\n                  backedTokens: _context12.t5,\n                  immutableData: _context12.t6,\n                  mutableData: _context12.t7,\n                  data: _context12.t8\n                });\n\n              case 37:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function toObject() {\n        return _toObject.apply(this, arguments);\n      }\n\n      return toObject;\n    }()\n  }]);\n\n  return RpcAsset;\n}();\n\nexports.default = RpcAsset;","map":{"version":3,"sources":["/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/atomicassets/build/API/Rpc/Asset.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","Serialization_1","require","Collection_1","Schema_1","Template_1","RpcAsset","api","owner","id","data","collection","schema","template","cache","_data","Promise","resolve","reject","queue","fetchAsset","_template","row","Number","template_id","default","collection_name","undefined","_collection","_schema","schema_name","backed_tokens","immutable_serialized_data","format","deserialize","mutable_serialized_data","mutableData","immutableData","templateData","assign","toObject","backedTokens","asset_id"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Serialization_1 = require(\"../../Serialization\");\nconst Collection_1 = __importDefault(require(\"./Collection\"));\nconst Schema_1 = __importDefault(require(\"./Schema\"));\nconst Template_1 = __importDefault(require(\"./Template\"));\nclass RpcAsset {\n    constructor(api, owner, id, data, collection, schema, template, cache = true) {\n        this.api = api;\n        this.owner = owner;\n        this.id = id;\n        this._data = new Promise(async (resolve, reject) => {\n            if (data) {\n                resolve(data);\n            }\n            else {\n                try {\n                    resolve(await api.queue.fetchAsset(owner, id, cache));\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }\n        });\n        this._template = new Promise(async (resolve, reject) => {\n            if (template) {\n                resolve(template);\n            }\n            else {\n                try {\n                    const row = await this._data;\n                    if (Number(row.template_id) < 0) {\n                        return resolve(null);\n                    }\n                    resolve(new Template_1.default(api, row.collection_name, row.template_id, undefined, undefined, cache));\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }\n        });\n        this._collection = new Promise(async (resolve, reject) => {\n            if (collection) {\n                resolve(collection);\n            }\n            else {\n                try {\n                    const row = await this._data;\n                    resolve(new Collection_1.default(api, row.collection_name, undefined, cache));\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }\n        });\n        this._schema = new Promise(async (resolve, reject) => {\n            if (schema) {\n                resolve(schema);\n            }\n            else {\n                try {\n                    const row = await this._data;\n                    resolve(new Schema_1.default(api, row.collection_name, row.schema_name, undefined, cache));\n                }\n                catch (e) {\n                    reject(e);\n                }\n            }\n        });\n    }\n    async template() {\n        return await this._template;\n    }\n    async collection() {\n        return await this._collection;\n    }\n    async schema() {\n        return await this._schema;\n    }\n    async backedTokens() {\n        return (await this._data).backed_tokens;\n    }\n    async immutableData() {\n        const schema = await this.schema();\n        const row = await this._data;\n        return Serialization_1.deserialize(row.immutable_serialized_data, await schema.format());\n    }\n    async mutableData() {\n        const schema = await this.schema();\n        const row = await this._data;\n        return Serialization_1.deserialize(row.mutable_serialized_data, await schema.format());\n    }\n    async data() {\n        const mutableData = await this.mutableData();\n        const immutableData = await this.immutableData();\n        const template = await this.template();\n        const templateData = template ? await template.immutableData() : {};\n        return Object.assign({}, mutableData, immutableData, templateData);\n    }\n    async toObject() {\n        const template = await this.template();\n        const collection = await this.collection();\n        const schema = await this.schema();\n        return {\n            asset_id: this.id,\n            collection: await collection.toObject(),\n            schema: await schema.toObject(),\n            template: template ? await template.toObject() : null,\n            backedTokens: await this.backedTokens(),\n            immutableData: await this.immutableData(),\n            mutableData: await this.mutableData(),\n            data: await this.data()\n        };\n    }\n}\nexports.default = RpcAsset;\n"]},"metadata":{},"sourceType":"script"}