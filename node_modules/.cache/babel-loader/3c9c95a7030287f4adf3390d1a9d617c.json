{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar SchemaError_1 = __importDefault(require(\"../Errors/SchemaError\"));\n\nvar Binary_1 = require(\"../Serialization/Binary\");\n\nvar MappingSchema = /*#__PURE__*/function () {\n  function MappingSchema(attributes) {\n    _classCallCheck(this, MappingSchema);\n\n    this.attributes = attributes;\n    this.reserved = 4;\n  }\n\n  _createClass(MappingSchema, [{\n    key: \"deserialize\",\n    value: function deserialize(state) {\n      var upwardsCompatible = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var object = {};\n\n      while (state.position < state.data.length) {\n        var identifier = Binary_1.varint_decode(state);\n\n        if (identifier.equals(0)) {\n          break;\n        }\n\n        var attribute = this.getAttribute(identifier.toJSNumber(), !upwardsCompatible);\n\n        if (attribute) {\n          object[attribute.name] = attribute.value.deserialize(state);\n        }\n      }\n\n      return object;\n    }\n  }, {\n    key: \"serialize\",\n    value: function serialize(object) {\n      var data = [];\n\n      for (var i = 0; i < this.attributes.length; i++) {\n        var attribute = this.attributes[i];\n\n        if (typeof object[attribute.name] === 'undefined') {\n          continue;\n        }\n\n        data.push(Binary_1.varint_encode(i + this.reserved));\n        data.push(attribute.value.serialize(object[attribute.name]));\n      }\n\n      data.push(Binary_1.varint_encode(0));\n      return Binary_1.concat_byte_arrays(data);\n    }\n  }, {\n    key: \"getAttribute\",\n    value: function getAttribute(identifier) {\n      var throwError = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var attributeID = identifier - this.reserved;\n\n      if (attributeID >= this.attributes.length) {\n        if (throwError) {\n          throw new SchemaError_1.default('attribute does not exists');\n        }\n\n        return;\n      }\n\n      return this.attributes[Number(attributeID)];\n    }\n  }]);\n\n  return MappingSchema;\n}();\n\nexports.default = MappingSchema;","map":{"version":3,"sources":["/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/atomicassets/build/Schema/MappingSchema.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","SchemaError_1","require","Binary_1","MappingSchema","attributes","reserved","state","upwardsCompatible","object","position","data","length","identifier","varint_decode","equals","attribute","getAttribute","toJSNumber","name","deserialize","i","push","varint_encode","serialize","concat_byte_arrays","throwError","attributeID","default","Number"],"mappings":"AAAA;;;;;;AACA,IAAIA,eAAe,GAAI,QAAQ,KAAKA,eAAd,IAAkC,UAAUC,GAAV,EAAe;AACnE,SAAQA,GAAG,IAAIA,GAAG,CAACC,UAAZ,GAA0BD,GAA1B,GAAgC;AAAE,eAAWA;AAAb,GAAvC;AACH,CAFD;;AAGAE,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAMC,aAAa,GAAGP,eAAe,CAACQ,OAAO,CAAC,uBAAD,CAAR,CAArC;;AACA,IAAMC,QAAQ,GAAGD,OAAO,CAAC,yBAAD,CAAxB;;IACME,a;AACF,yBAAYC,UAAZ,EAAwB;AAAA;;AACpB,SAAKA,UAAL,GAAkBA,UAAlB;AACA,SAAKC,QAAL,GAAgB,CAAhB;AACH;;;;WACD,qBAAYC,KAAZ,EAA8C;AAAA,UAA3BC,iBAA2B,uEAAP,KAAO;AAC1C,UAAMC,MAAM,GAAG,EAAf;;AACA,aAAOF,KAAK,CAACG,QAAN,GAAiBH,KAAK,CAACI,IAAN,CAAWC,MAAnC,EAA2C;AACvC,YAAMC,UAAU,GAAGV,QAAQ,CAACW,aAAT,CAAuBP,KAAvB,CAAnB;;AACA,YAAIM,UAAU,CAACE,MAAX,CAAkB,CAAlB,CAAJ,EAA0B;AACtB;AACH;;AACD,YAAMC,SAAS,GAAG,KAAKC,YAAL,CAAkBJ,UAAU,CAACK,UAAX,EAAlB,EAA2C,CAACV,iBAA5C,CAAlB;;AACA,YAAIQ,SAAJ,EAAe;AACXP,UAAAA,MAAM,CAACO,SAAS,CAACG,IAAX,CAAN,GAAyBH,SAAS,CAAChB,KAAV,CAAgBoB,WAAhB,CAA4Bb,KAA5B,CAAzB;AACH;AACJ;;AACD,aAAOE,MAAP;AACH;;;WACD,mBAAUA,MAAV,EAAkB;AACd,UAAME,IAAI,GAAG,EAAb;;AACA,WAAK,IAAIU,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKhB,UAAL,CAAgBO,MAApC,EAA4CS,CAAC,EAA7C,EAAiD;AAC7C,YAAML,SAAS,GAAG,KAAKX,UAAL,CAAgBgB,CAAhB,CAAlB;;AACA,YAAI,OAAOZ,MAAM,CAACO,SAAS,CAACG,IAAX,CAAb,KAAkC,WAAtC,EAAmD;AAC/C;AACH;;AACDR,QAAAA,IAAI,CAACW,IAAL,CAAUnB,QAAQ,CAACoB,aAAT,CAAuBF,CAAC,GAAG,KAAKf,QAAhC,CAAV;AACAK,QAAAA,IAAI,CAACW,IAAL,CAAUN,SAAS,CAAChB,KAAV,CAAgBwB,SAAhB,CAA0Bf,MAAM,CAACO,SAAS,CAACG,IAAX,CAAhC,CAAV;AACH;;AACDR,MAAAA,IAAI,CAACW,IAAL,CAAUnB,QAAQ,CAACoB,aAAT,CAAuB,CAAvB,CAAV;AACA,aAAOpB,QAAQ,CAACsB,kBAAT,CAA4Bd,IAA5B,CAAP;AACH;;;WACD,sBAAaE,UAAb,EAA4C;AAAA,UAAnBa,UAAmB,uEAAN,IAAM;AACxC,UAAMC,WAAW,GAAGd,UAAU,GAAG,KAAKP,QAAtC;;AACA,UAAIqB,WAAW,IAAI,KAAKtB,UAAL,CAAgBO,MAAnC,EAA2C;AACvC,YAAIc,UAAJ,EAAgB;AACZ,gBAAM,IAAIzB,aAAa,CAAC2B,OAAlB,CAA0B,2BAA1B,CAAN;AACH;;AACD;AACH;;AACD,aAAO,KAAKvB,UAAL,CAAgBwB,MAAM,CAACF,WAAD,CAAtB,CAAP;AACH;;;;;;AAEL5B,OAAO,CAAC6B,OAAR,GAAkBxB,aAAlB","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst SchemaError_1 = __importDefault(require(\"../Errors/SchemaError\"));\nconst Binary_1 = require(\"../Serialization/Binary\");\nclass MappingSchema {\n    constructor(attributes) {\n        this.attributes = attributes;\n        this.reserved = 4;\n    }\n    deserialize(state, upwardsCompatible = false) {\n        const object = {};\n        while (state.position < state.data.length) {\n            const identifier = Binary_1.varint_decode(state);\n            if (identifier.equals(0)) {\n                break;\n            }\n            const attribute = this.getAttribute(identifier.toJSNumber(), !upwardsCompatible);\n            if (attribute) {\n                object[attribute.name] = attribute.value.deserialize(state);\n            }\n        }\n        return object;\n    }\n    serialize(object) {\n        const data = [];\n        for (let i = 0; i < this.attributes.length; i++) {\n            const attribute = this.attributes[i];\n            if (typeof object[attribute.name] === 'undefined') {\n                continue;\n            }\n            data.push(Binary_1.varint_encode(i + this.reserved));\n            data.push(attribute.value.serialize(object[attribute.name]));\n        }\n        data.push(Binary_1.varint_encode(0));\n        return Binary_1.concat_byte_arrays(data);\n    }\n    getAttribute(identifier, throwError = true) {\n        const attributeID = identifier - this.reserved;\n        if (attributeID >= this.attributes.length) {\n            if (throwError) {\n                throw new SchemaError_1.default('attribute does not exists');\n            }\n            return;\n        }\n        return this.attributes[Number(attributeID)];\n    }\n}\nexports.default = MappingSchema;\n"]},"metadata":{},"sourceType":"script"}