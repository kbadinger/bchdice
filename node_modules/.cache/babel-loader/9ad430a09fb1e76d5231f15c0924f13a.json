{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ObjectSchema = void 0;\n\nconst SchemaError_1 = __importDefault(require(\"../Errors/SchemaError\"));\n\nconst MappingSchema_1 = __importDefault(require(\"./MappingSchema\"));\n\nconst ValueSchema_1 = __importDefault(require(\"./ValueSchema\"));\n\nconst VectorSchema_1 = __importDefault(require(\"./VectorSchema\"));\n\nfunction buildObjectSchema(objectID, lookup) {\n  const attributes = [];\n  let fields = lookup[objectID];\n\n  if (typeof fields === 'undefined') {\n    fields = [];\n  }\n\n  delete lookup[objectID];\n\n  for (const field of fields) {\n    attributes.push({\n      name: field.name,\n      value: buildValueSchema(field.type, lookup)\n    });\n  }\n\n  return new MappingSchema_1.default(attributes);\n}\n\nfunction buildValueSchema(type, lookup) {\n  if (type.endsWith('[]')) {\n    return new VectorSchema_1.default(buildValueSchema(type.substring(0, type.length - 2), lookup));\n  } // not supported by the contract currently\n\n\n  if (type.startsWith('object{') && type.endsWith('}')) {\n    const objectID = parseInt(type.substring(7, type.length - 1), 10);\n\n    if (isNaN(objectID)) {\n      throw new SchemaError_1.default(`invalid type '${type}'`);\n    }\n\n    return buildObjectSchema(objectID, lookup);\n  }\n\n  return new ValueSchema_1.default(type);\n}\n\nfunction ObjectSchema(schema) {\n  const objectLookup = {};\n\n  for (const schemaObject of schema) {\n    const objectID = typeof schemaObject.parent === 'undefined' ? 0 : schemaObject.parent;\n\n    if (typeof objectLookup[objectID] === 'undefined') {\n      objectLookup[objectID] = [];\n    }\n\n    objectLookup[objectID].push(schemaObject);\n  }\n\n  return buildObjectSchema(0, objectLookup);\n}\n\nexports.ObjectSchema = ObjectSchema;","map":{"version":3,"sources":["/Users/kevinbadinger/eos/reactdemo/WCWReact/node_modules/atomicassets/build/Schema/index.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","ObjectSchema","SchemaError_1","require","MappingSchema_1","ValueSchema_1","VectorSchema_1","buildObjectSchema","objectID","lookup","attributes","fields","field","push","name","buildValueSchema","type","default","endsWith","substring","length","startsWith","parseInt","isNaN","schema","objectLookup","schemaObject","parent"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ObjectSchema = void 0;\nconst SchemaError_1 = __importDefault(require(\"../Errors/SchemaError\"));\nconst MappingSchema_1 = __importDefault(require(\"./MappingSchema\"));\nconst ValueSchema_1 = __importDefault(require(\"./ValueSchema\"));\nconst VectorSchema_1 = __importDefault(require(\"./VectorSchema\"));\nfunction buildObjectSchema(objectID, lookup) {\n    const attributes = [];\n    let fields = lookup[objectID];\n    if (typeof fields === 'undefined') {\n        fields = [];\n    }\n    delete lookup[objectID];\n    for (const field of fields) {\n        attributes.push({ name: field.name, value: buildValueSchema(field.type, lookup) });\n    }\n    return new MappingSchema_1.default(attributes);\n}\nfunction buildValueSchema(type, lookup) {\n    if (type.endsWith('[]')) {\n        return new VectorSchema_1.default(buildValueSchema(type.substring(0, type.length - 2), lookup));\n    }\n    // not supported by the contract currently\n    if (type.startsWith('object{') && type.endsWith('}')) {\n        const objectID = parseInt(type.substring(7, type.length - 1), 10);\n        if (isNaN(objectID)) {\n            throw new SchemaError_1.default(`invalid type '${type}'`);\n        }\n        return buildObjectSchema(objectID, lookup);\n    }\n    return new ValueSchema_1.default(type);\n}\nfunction ObjectSchema(schema) {\n    const objectLookup = {};\n    for (const schemaObject of schema) {\n        const objectID = typeof schemaObject.parent === 'undefined' ? 0 : schemaObject.parent;\n        if (typeof objectLookup[objectID] === 'undefined') {\n            objectLookup[objectID] = [];\n        }\n        objectLookup[objectID].push(schemaObject);\n    }\n    return buildObjectSchema(0, objectLookup);\n}\nexports.ObjectSchema = ObjectSchema;\n"]},"metadata":{},"sourceType":"script"}